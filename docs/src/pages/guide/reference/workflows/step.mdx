# Step

Steps are the building blocks of a workflow. Each step defines an action to execute and how to handle its data.
By default, steps are executed simultaneously unless [configured](./config) otherwise.

We are adding explicit OpenTelemetry tracing to each step, so that you can see the inputs and outputs of each step in your observability platform.

### Step Class

Steps are created using the `Step` class:

```ts showLineNumbers copy
import { Step } from "@mastra/core";

const step = new Step({
  id: "stepId",
});
```

## Examples

### Basic Step

```ts showLineNumbers filename="src/mastra/workflows/order-workflow.ts" lineNumbers={16} copy
import { Workflow, Step } from "@mastra/core";

const processOrder = new Step({
  id: "processOrder",
});

// Register step in workflow
const workflow = new Workflow({
  name: "order-workflow",
  steps: [processOrder],
});
```

### With Schema Validation, Payload and Action

```ts showLineNumbers filename="src/mastra/workflows/order-workflow.ts" lineNumbers={3-19} copy
const processOrder = new Step({
  id: "processOrder",
  inputSchema: z.object({
    id: z.string(),
  }),
  payload: {
    id: "123",
  },
  outputSchema: z.object({
    status: z.enum(["processed", "failed"]),
    orderId: z.string(),
  }),
  action: async ({ data, runId }) => {
    // Process order
    return {
      status: "processed",
      orderId: data.id,
    };
  },
});

// Register step in workflow
const workflow = new Workflow({
  name: "order-workflow",
  steps: [processOrder],
});
```

## API Reference

### Step Properties

<PropertiesTable
  content={[
    {
      name: "id",
      type: "string",
      description: "Unique identifier for the step",
    },
    {
      name: "inputSchema",
      type: "ZodSchema",
      description: "Zod schema to validate input data",
      isOptional: true,
    },
    {
      name: "outputSchema",
      type: "ZodSchema",
      description: "Zod schema to validate output data",
      isOptional: true,
    },
    {
      name: "action",
      type: "({ data, runId }: { data: InputSchemaData; runId: string }) => Promise<OutputSchemaData>",
      description: "Async function containing the step logic",
      isOptional: true,
    },
    {
      name: "payload",
      type: "Partial<Record<string, any>>",
      description: "Static data to merge with variables",
      isOptional: true,
    },
    {
      name: "retryConfig",
      type: "RetryConfig",
      description: "Configuration for retry behavior",
      isOptional: true,
      properties: [
        {
          type: "RetryConfig",
          parameters: [
            {
              name: "attempts",
              type: "number",
              description: "Number of attempts to retry the step",
              isOptional: true,
            },
            {
              name: "delay",
              type: "number",
              description: "Delay between retries in milliseconds",
              isOptional: true,
            },
          ],
        },
      ],
    },
  ]}
/>
