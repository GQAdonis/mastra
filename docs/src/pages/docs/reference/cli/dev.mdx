---
title: "`mastra dev` Reference | Local Development | Mastra CLI"
description: Documentation for the mastra dev command, which starts a development server for agents, tools, and workflows.
---

# `mastra dev` Reference

The `mastra dev` command starts a development server that exposes REST endpoints for your agents, tools, and workflows,

## Parameters

<PropertiesTable
  content={[
    {
      name: "--dir",
      type: "string",
      description:
        "Specifies the path to your Mastra folder (containing agents, tools, and workflows). Defaults to the current working directory.",
      isOptional: true,
    },
    {
      name: "--env",
      type: "string",
      description:
        "Specifies which environment file to load. Defaults to `.env.development`, falling back to `.env` if not found.",
      isOptional: true,
    },
    {
      name: "--tools",
      type: "string",
      description:
        "Comma-separated paths to additional tool directories that should be registered. For example: 'src/tools/dbTools,src/tools/scraperTools'.",
      isOptional: true,
    },
    {
      name: "--port",
      type: "number",
      description:
        "Specifies the port number for the development server. Defaults to 4111.",
      isOptional: true,
    },
  ]}
/>

## Routes

Starting the server with `mastra dev` exposes a set of REST endpoints by default:

### Agent Routes

Agents are expected to be exported from `src/mastra/agents`.

• `GET /api/agents`
  - Lists the registered agents found in your Mastra folder.
• `POST /api/agents/:agentId/generate`
  - Sends a text-based prompt to the specified agent, returning the agent's response.
• `POST /api/agents/:agentId/stream`
  - Streams the agent's response in real-time, with support for both text and structured output.

### Tool Routes

Tools are expected to be exported from `src/mastra/tools` (or the configured tools directory).

• `POST /api/tools/:toolName`
  - Invokes a specific tool by name, passing input data in the request body.

### Workflow Routes

Workflows are expected to be exported from `src/mastra/workflows` (or the configured workflows directory).

• `POST /api/workflows/:workflowName/start`
  - Starts the specified workflow.
• `POST /api/workflows/:workflowName/:instanceId/event`
  - Sends an event or trigger signal to an existing workflow instance.
• `GET /api/workflows/:workflowName/:instanceId/status`
  - Returns status info for a running workflow instance.

### OpenAPI Specification

• `GET /openapi.json`
  - Returns an auto-generated OpenAPI specification for your project's endpoints.

## Stream Response Format

When using the streaming endpoint (`/api/agents/:agentId/stream`), the response is delivered as a series of chunks. Each chunk is prefixed with a number indicating its type:

- `0:"content"` - Regular content from the agent
- `3:"error_message"` - Error messages when something goes wrong

The stream also includes additional metadata:
- Usage information (e.g., token counts)
- Reasoning details about the agent's decision-making process

## Error Handling

Errors in the development server are handled consistently across all endpoints:

1. For non-streaming endpoints:
   - Returns a standard HTTP error status code
   - Includes an error message in the response body

2. For streaming endpoints:
   - Errors are sent as chunks prefixed with `3:` 
   - The error message is included in quotes
   - The stream is terminated after sending the error

Example error response in stream:
```
3:"An error occurred: Invalid API key provided"
```

## Additional Notes

The port defaults to 4111.

Make sure you have your environment variables set up in your `.env.development` or `.env` file for any providers you use (e.g., `OPENAI_API_KEY`, `ANTHROPIC_API_KEY`, etc.).

### Example request

To test an agent after running `mastra dev`:

```bash
curl -X POST http://localhost:4111/api/agents/myAgent/generate \
  -H "Content-Type: application/json" \
  -d '{
    "messages": [
      { "role": "user", "content": "Hello, how can you assist me today?" }
    ]
  }'
```

## Related Docs

- [REST Endpoints Overview](../../local-dev/mastra-dev.mdx) – More detailed usage of the dev server and agent endpoints.
- [mastra deploy](../../deployment/deployment.mdx) – Deploy your project to Vercel or Cloudflare.
